<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <h:head>
        <f:facet name="first">
            <meta http-equiv="X-UA-Compatible" content="IE=edge" />
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
            <!--<meta name="viewport" content="width=device-width, initial-scale=0.65, maximum-scale=2.0, user-scalable=1"/>-->
            <!--<meta name="viewport" content="width=1260, user-scalable=1, initial-scale=1"/>-->
            <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>

            <meta name="apple-mobile-web-app-capable" content="yes" />
            <!--<link rel="icon" type="image/x-icon" href="#{request.contextPath}/javax.faces.resource/images/favicon.png.xhtml"/>-->
        </f:facet>
        <title>Administration</title>
        <link type="text/css" rel="stylesheet" href="https://unpkg.com/primeflex@3.1.2/primeflex.css" />
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet"></link>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous"/>

        <!--<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>-->
        <!--<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>-->
        <!--<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>-->
        <!--<h:outputScript name="js/nanoscroller.js" library="serenity-layout" />-->
        <!--<h:outputScript name="js/layout.js?#{startup.time}" library="serenity-layout" />-->
        <!--<h:outputScript name="js/ripple.js" library="serenity-layout" />-->
        <!--<h:outputStylesheet name="css/nanoscroller.css" library="serenity-layout" />-->
        <!--<h:outputStylesheet name="css/ripple.css" library="serenity-layout" />-->
        <!--<h:outputStylesheet name="css/layout-blue.css?#{startup.time}" library="serenity-layout" />-->
        <!--<h:outputStylesheet name="css/customisation.css?#{startup.time}" library="serenity-layout" />-->
    </h:head>

    <h:body id="bodyComponent">

        <style>
            body .ui-datalist .ui-datalist-content{
                border: 0px;
                padding: 0px;
                font-weight: normal;
            }
            .dt.ui-datalist-item{
                font-weight: normal;
            }
            dt{
                font-weight: 600 !important;

            }
            
            .layout-main{
                
            }

            .layout-footer{
                position: fixed;
                bottom: 0;
                width: 100%;
                background: #f8f9fa;
                padding: 8px;
                border-top: 1px solid #c6c7c9;
                z-index: 9999999;
            }
            .footer-text-right{
                text-align: right;
                float: right;
                font-size: 10pt;
            }
            .companyInfo{
                color: black;
            }
            .companyInfoLogo{
                color: #2196F3;
                padding-right: 10px;
            }
            .companyInfoHeaderPanelGroup{
                padding-top: 17px;
            }
            @media screen and (min-width : 1025px) {
                .verticalmenu {
                    display: none !important;
                }
            }
            @media screen and (max-width : 1025px) {
                .horizontalmenu {
                    display: none !important;
                }
            }
            @media screen and (max-width : 719px) {
                .companyName{
                    display: none;   
                }
                .headerMenuRightItems{
                    padding-right: 10px !important;
                }

            }
            @media screen and (max-width : 321px) {
                .shoppingCartAmount{
                    display: none !important;   
                }
                

            }
            .HeaderMenuBar{
                /*height: 60px;*/
                width: 100%;
                z-index: 9999999;
                position: fixed;
                background: #f8f9fa;
                border-bottom: 1px solid #cdcdcd;
            }
            .ui-g-6, .ui-g-5, .ui-g-7, .ui-g-4, .ui-g-8, ui-md-6{
                padding: 0px; 
            }
            .menuBarClass{
                padding: 10px;
                background: none !important;
                border: none !important;
            }
            .headerMenuRightItems{
                float: right;
                text-align: right;
                padding: 10px 40px 5px 0px;
            }
            .butonIconHeader .ui-button{
                border: none !important;
                background: none !important;
                color: blue !important;

            }
            .logoHeader{
                float: left;
                padding: 15px 0px 15px 15px;
            }
        </style>

        <div>
            <h:form id="menuform">
                <nav>
                    <div class="HeaderMenuBar">
                        <div class="logoHeader">
                            <i class="pi pi-cog" style="font-size: 1.8rem" ></i>
                        </div>
                        <div class="ui-g">
                            <div class="headerMenuItems ui-g-4 ui-md-6">

                                <p:menubar id="fullMenuBar" autoDisplay="false" class="horizontalmenu menuBarClass">
                                    <ui:include src="/WEB-INF/includes/headerBarMenuItems.xhtml" />
                                </p:menubar>


                                <p:menubar id="hamburgerMenuBar" autoDisplay="false" class="verticalmenu menuBarClass">
                                    <p:submenu icon="fa fa-bars">
                                        <ui:include src="/WEB-INF/includes/headerBarMenuItems.xhtml" />
                                    </p:submenu>
                                    <!--                        <f:facet name="options" rendered="false">
                                                        <div class="ui-g" style="width: 420px;">
                                                            
                                                            
                                                        </div>
                                    
                                    
                                    
                                                    </f:facet>-->
                                </p:menubar>
                            </div>
                            <div class="headerMenuRightItems ui-g-8 ui-md-6">
                                <h:panelGroup class="companyInfoHeaderPanelGroup">
                                    <p:commandLink action="/user.xhtml?faces-redirect=true">
                                        <h:panelGroup class="companyInfo" style="padding-right: 15px;">
                                            <i class="pi pi-user companyInfoLogo"></i>
                                            <h:outputText value="#{SecurityMB.user.name}" class="companyName"/>
                                        </h:panelGroup>
                                    </p:commandLink>
                                </h:panelGroup>
                                <h:panelGroup layout="block" style="padding-right: 10px; display: inline;">
                                    <p:commandLink value="" 
                                                   update=":menuform:shoppingCartDetails"
                                                   onclick="PF('shoppingCartWidgetVar').show()"
                                                   >
                                        <h:panelGroup layout="block" class="shoppingCartAmount" style="padding-right: 5px; color:#2196F3; display: inline;">
                                            <h:outputLabel value="#{OrderControllerMB.order.finalPrice}" >
                                                <f:convertNumber pattern="#,##0.00"  type="currency" currencySymbol="€" maxFractionDigits="2"  />
                                            </h:outputLabel>
                                            <h:outputLabel value="€"/>
                                        </h:panelGroup>
                                        <p:badge id="shoppingCartBadge" value="#{OrderControllerMB.getNumberOrItemsInOrder()}" severity="danger" styleClass="ml-3">

                                            <i class="pi pi-shopping-cart" style="font-size: 1.5rem" ></i>
                                            <p:effect type="bounce" event="load"/>
                                        </p:badge>
                                    </p:commandLink>
                                </h:panelGroup>

                                <p:menuButton icon="pi pi-cog" styleClass="butonIconHeader">
                                    <p:menuitem value="Logout" icon="pi pi-fw pi-sign-out" styleClass="ui-button-info" action="#{SecurityMB.logout()}" process="@this"/>
                                </p:menuButton>
                            </div>
                        </div>
                    </div>
                </nav>

                <p:sidebar widgetVar="shoppingCartWidgetVar" position="right" blockScroll="false" style="overflow: scroll;">
                    <h:panelGroup id="shoppingCartDetails" >
                        <h:panelGroup rendered="#{OrderControllerMB.order != null}">

                            <p:dataList value="#{CheckOutControllerMB.order.orderRepresentatives}"
                                        var="rep"
                                        emptyMessage=""
                                        type="definition"
                                        style="border: 0px; margin: 0px; padding: 0px;"
                                        >

                                <div class="ui-g">
                                    <div class="ui-g-5">
                                        <h:outputLabel value="#{rep.representative.firstName} " />
                                        <h:outputLabel value="#{rep.representative.lastName}" />
                                    </div>
                                    <div class="ui-g-6" style="text-align: right;">
                                        <h:outputText value="#{rep.price}" >
                                            <f:convertNumber type="currency" currencySymbol="€ "/>
                                        </h:outputText>
                                    </div>
                                    <div class="ui-g-1">
                                        <p:commandLink value="X" 
                                                       action="#{OrderControllerMB.removeRepresentativeFromOrder(rep)}" 
                                                       process="@this" 
                                                       update="menuform:shoppingCartDetails menuform:shoppingCartBadge" 
                                                       />
                                    </div>
                                </div>
                            </p:dataList>

                            <p:dataList value="#{OrderControllerMB.order.orderItems}"
                                        var="row"
                                        type="definition"
                                        emptyMessage=""
                                        style="border: 0px; margin: 0px; padding: 0px;"
                                        >



                                <div class="ui-g">
                                    <div class="ui-g-5">
                                        <h:outputText value="#{row.product.name} "/>
                                    </div>
                                    <div class="ui-g-6" style="text-align: right;">
                                        <h:outputText value="#{row.price}" >
                                            <f:convertNumber pattern="#,##0.00"  type="number" />
                                        </h:outputText>
                                        <h:outputText value="€ " />
                                        <h:outputText value=" x " />
                                        <h:outputText value="#{row.quantity}" />
                                        <h:outputText value=" =" />
                                        <h:outputText value="#{row.finalPrice}" >
                                            <f:convertNumber pattern="#,##0.00"  type="currency" currencySymbol="€" maxFractionDigits="2"  />
                                        </h:outputText>
                                        <h:outputText value="€" />
                                    </div>
                                    <div class="ui-g-1">
                                        <p:commandLink value="X" 
                                                       action="#{OrderControllerMB.removeOrderItemFromOrder(row)}" 
                                                       process="@this" 
                                                       update="menuform:shoppingCartDetails menuform:shoppingCartBadge" 
                                                       />
                                    </div>
                                </div>
                                <hr style="margin: 5px;"/>
                            </p:dataList>
                            <div class="ui-g" style="margin-top: -20px;">
                                <div class="ui-g-5">
                                    <h:outputText value="#{row.product.name} "/>
                                </div>
                                <div class="ui-g-6" style="text-align: right; font-weight: 700;">
                                    <h:outputText value="Total amount: "/>
                                    <h:outputText value="#{OrderControllerMB.order.finalPrice}" >
                                        <f:convertNumber pattern="#,##0.00"  type="currency" currencySymbol="€" maxFractionDigits="2"  />
                                    </h:outputText>
                                    <h:outputText value="€"/>
                                </div>
                                <div class="ui-g-1">
                                </div>
                            </div>





                        </h:panelGroup>
                    </h:panelGroup>
                </p:sidebar>

            </h:form>
            <h:form>
                <p:confirmDialog global="true" showEffect="fade" hideEffect="fade" responsive="true">
                    <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no ui-button-flat"/>
                    <p:commandButton value="Yes" type="button" styleClass="ui-confirmdialog-yes" />
                </p:confirmDialog>
            </h:form>
        </div>



        <div class="layout-main" style="padding-top: 80px; padding-bottom: 50px;">
            <p:growl id="msgs" skipDetailIfEqualsSummary="true" showDetail="true" globalOnly="true" widgetVar="msgWidget">
                <p:autoUpdate/>
            </p:growl>

            <h:panelGroup layout="block" rendered="#{empty contentVisible ? true : contentVisible}" >
                <ui:insert name="content"/>
            </h:panelGroup>

            <ui:insert name="footer">
                <div class="layout-footer clearfix">
                    <span class="app-logo">Welcome at <b> #{SecurityMB.salesObject.salesObjectName}</b></span>
                    <span class="footer-text-right">
                        <span>WebApp&#x2122; </span>
                        <span class="ui-icon ui-icon-copyright"></span> 
                        <span> 2022. All rights reserved.</span>
                    </span>
                </div>
            </ui:insert>

            <div class="layout-content">
                <ui:insert name="modalDialogs"/>
                <ui:insert name="otherDialogs"/>
            </div>
        </div>   


    </h:body>

</html>